<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Holiday Atlas — National Holidays Map</title>

    <link rel="stylesheet" href="/styles.css" />

    <script src="https://code.highcharts.com/maps/highmaps.js" defer></script>
    <script src="https://code.highcharts.com/modules/exporting.js" defer></script>
    <script src="https://code.highcharts.com/modules/accessibility.js" defer></script>
    <script type="module" src="/app.js"></script>
  </head>
  <body>
    <header>
      <div class="brand">Holiday Atlas — Interactive Map of National Holidays</div>
    </header>

    <div class="layout">
      <!-- LEFT: minimalist sidebar menu -->
      <aside class="menu">
        <h2 class="menu-title">
          Countries with the Most Holidays <span id="menu-year"></span>
        </h2>
        <nav class="menu-nav" aria-label="Page sections">
          <a class="menu-link" href="#interactive-map">Top 10 Countries with the Most Holidays</a>
          <a class="menu-link" href="#fewest">Which Countries Have the Fewest Number of Public Holidays?</a>
          <a class="menu-link" href="#religious">Are Public Holidays and Religious Holidays the Same?</a>
          <a class="menu-link" href="#us-holidays">How Many Public Holidays Does the United States Have?</a>
          <a class="menu-link" href="#sources">Sources</a>
        </nav>
      </aside>

      <main class="main">
        <section id="interactive-map" class="section">
          <div class="view-tags" role="tablist" aria-label="Map views">
            <button class="view-tag is-active" role="tab" aria-selected="true" data-view="all">All Year</button>
            <button class="view-tag" role="tab" aria-selected="false" data-view="today">Today</button>
            <button class="view-tag" role="tab" aria-selected="false" data-view="next7">Next 7 days</button>
            <button class="view-tag" role="tab" aria-selected="false" data-view="next30">Next 30 days</button>
          </div>

          <div class="map-wrap">
            <div id="wpr-map" role="img" aria-label="Choropleth map of national holidays"></div>
            <article id="details" class="card">
              <div class="details-header">
                <strong id="details-title">National Holidays</strong>
                <div class="details-views" role="tablist" aria-label="Detail views">
                  <button id="details-view-list" class="details-view is-active" role="tab" aria-selected="true">List</button>
                  <button id="details-view-cal" class="details-view" role="tab" aria-selected="false">Calendar</button>
                </div>
              </div>
              <div id="details-body"></div>
            </article>
          </div>

          <div id="region-list-anchor"></div>
          <div id="view-loading" class="loading-chip" hidden>Loading</div>
          <section id="holiday-country-list" class="country-panel hidden" aria-live="polite"></section>
        </section>
      </main>
    </div>

    <script>
      // Smooth in-page scroll (safe even if target section doesn't exist)
      document.addEventListener('click', (e) => {
        const a = e.target.closest('a[href^="#"]');
        if (!a) return;
        const el = document.querySelector(a.getAttribute('href'));
        if (!el) return;
        e.preventDefault(); el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        history.replaceState(null, '', a.getAttribute('href'));
      });

      // Year badge inside the left menu title
      (function () {
        const y = new URLSearchParams(location.search).get('year');
        const YEAR = Number.isInteger(+y) && +y >= 1900 && +y <= 2100 ? +y : (new Date()).getFullYear();
        const badge = document.getElementById('menu-year');
        if (badge) badge.textContent = ` ${YEAR}`;
      })();
    </script>
  </body>
</html>
